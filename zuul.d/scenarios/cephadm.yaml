---
- job:
    name: kolla-ansible-cephadm-base
    parent: kolla-ansible-base
    voting: false
    files:
      - ^ansible/group_vars/all/(ceph|ceph-rgw|common|fluentd|glance|heat|horizon|keepalived|keystone|loadbalancer|neutron|nova|openvswitch|placement|proxysql|rabbitmq|valkey).yml
      - ^ansible/group_vars/baremetal/ansible-python-interpreter.yml
      - ^ansible/roles/(ceph-rgw|common|fluentd|glance|haproxy-config|heat|horizon|keystone|loadbalancer|loadbalancer-config|neutron|nova|openvswitch|placement|proxysql|rabbitmq|valkey)/
      - ^roles/cephadm/
    vars:
      kolla_ansible_setup_disks_file_path: "/var/lib/ceph-osd.img"
      kolla_ansible_setup_disks_vg_name: "cephvg"
      kolla_ansible_setup_disks_lv_name: "cephlv"
      kolla_ansible_tempest_exclude_regex: "^tempest.api.object_storage"
      scenario: cephadm
      scenario_images_extra:
        - ^cinder
        - ^valkey

- job:
    name: kolla-ansible-debian-bookworm-cephadm
    parent: kolla-ansible-cephadm-base
    nodeset: kolla-ansible-debian-bookworm-multi-16GB
    timeout: 10800

- job:
    name: kolla-ansible-debian-bookworm-cephadm-upgrade
    parent: kolla-ansible-debian-bookworm-cephadm
    nodeset: kolla-ansible-debian-bookworm-multi-16GB
    timeout: 10800

- job:
    name: kolla-ansible-debian-bookworm-cephadm-upgrade-slurp
    parent: kolla-ansible-debian-bookworm-cephadm-upgrade
    nodeset: kolla-ansible-debian-bookworm-multi-16GB
    timeout: 9000

- job:
    name: kolla-ansible-ubuntu-noble-cephadm
    parent: kolla-ansible-cephadm-base
    nodeset: kolla-ansible-ubuntu-noble-multi-16GB
    timeout: 10800
    vars:
      cephadm_use_package_from_distribution: true

- job:
    name: kolla-ansible-ubuntu-noble-cephadm-upgrade
    parent: kolla-ansible-ubuntu-noble-cephadm
    nodeset: kolla-ansible-ubuntu-noble-multi-16GB
    timeout: 10800

- job:
    name: kolla-ansible-ubuntu-noble-cephadm-upgrade-slurp
    parent: kolla-ansible-ubuntu-noble-cephadm-upgrade
    nodeset: kolla-ansible-ubuntu-noble-multi-16GB
    timeout: 9000

- project-template:
    name: kolla-ansible-scenario-cephadm
    description: |
      Runs Kolla-Ansible CephAdm scenario jobs.
    check:
      jobs:
        - kolla-ansible-debian-bookworm-cephadm
        - kolla-ansible-debian-bookworm-cephadm-upgrade
        - kolla-ansible-ubuntu-noble-cephadm
        - kolla-ansible-ubuntu-noble-cephadm-upgrade
